<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="gbk">
    <title>UI Tester </title>


    <link rel="stylesheet" type="text/css" href="../../lib/jasmine.css">
    <script src="../../lib/kissy-aio.js"></script>

    <script src="./postmsg.js"></script>
    <style>
        ul{
            padding:0;
            margin:0;
        }
        html{
            height:100%;
            overflow:hidden;;
        }
        body{
            margin:0;
            padding:0;
            height:100%;
            overflow:hidden;;
            font-size:12px;
            background-color:#EEE;
        }
        #page{
            display:-webkit-box;
            -webkit-box-orient:vertical;
            display:-moz-box;
            -moz-box-orient:vertical;
            display:box;
            box-orient:vertical;
            height:100%;
        }
        #nav{
            border-bottom:solid 1px #cccccc;
            padding:5px;
            overflow:hidden;;
            list-style:none;
        }
        #nav ul{
            margin:0;
            padding:0;
        }
        #nav li{
            list-style:none;
            float:right;
            height:20px;
            line-height:20px;
            margin-right:20px;
        }
        #content{
            -webkit-box-flex:1;
            -moz-box-flex:1;
            box-flex:1;
            display:-webkit-box;
            -webkit-box-orient:horizontal;
            display:-moz-box;
            -moz-box-orient:horizontal;
            display:box;
            box-orient:horizontal;
        }

        #content{
            display:-webkit-box;
            -webkit-box-orient:horizontal;
            display:-moz-box;
            -moz-box-orient:horizontal;
            display:box;
            box-orient:horizontal;
        }
        #content .sub{
            width:50px;
            border:solid 1px #ccc;
            margin-right:2px;
            width:0px;
            overflow:hidden;;
        }
        #content .sub a{
            display:block;;
            width:30px;
            height:30px;
            text-indent:-500px;
            border:solid 1px red;
            margin:auto;
            margin-top:10px;
            margin-bottom:10px;
        }
        #content .main{
            display:-webkit-box;
            -webkit-box-orient:vertical;
            display:-moz-box;
            -moz-box-orient:vertical;
            display:box;
            box-orient:vertical;
            -webkit-box-flex:1;
            -moz-box-flex:1;
            box-flex:1;
            border:solid 1px #ccc;
            font-size:12px;
        }
        #content .aside{
            width:200px;
            border:solid 1px #ccc;
            margin-left:3px;
        }
        #content .main .page{
            height:300px;
            overflow:auto;
        }
        #content .main .page iframe{
            border:none;
        }
        #content .main  .code{
            border:solid 1px #ccc;
            overflow:auto;
            background:#fff;
            -webkit-box-flex:1;
            -moz-box-flex:1;
            box-flex:1;
        }
        .configs{
        }
        .configs h3{
            display:block;;
            height:20px;
            line-height:20px;
            font-weight:bold;
            background-color:#ccc;
            padding-left:5px;
            position:relative;
            overflow:hidden;;
            margin:0;
            background-color:#F8F8F8;
            background-image:-webkit-gradient(linear, left top, left bottom, from(#F8F8F8), to(#ECECEC));
            background-image:-webkit-linear-gradient(top, #F8F8F8, #ECECEC);
            border-top:1px solid #C6C6C6;
            border-bottom:1px solid #C6C6C6;
            font-size:12px;



        }
        .configs h3 a{
            color:#666;
        }
        .configs h3 a.status{
            position:absolute;
            top:4px;
            right:10px;;
            text-indent:-500px;
            display:block;
            width:10px;
            height:10px;
            border-radius:5px;
            background-color:#000;
            cursor:pointer;
        }
        .configs h3 a.start{
            background-color:#DD4B39;
        }
        .configs h3 a.stop{
            background-color:#000;
        }
        .configs  ul{
            margin-left:10px;
        }
        .configs   li{
            list-style:none;
        }
        .tab1{
            width:20px;
            display:inline-block;
        }
        .tab2{
            width:40px;
            display:inline-block;
        }
        .tab3{
            width:60px;
            display:inline-block;
        }
        #page .text-editor{
            font-size:12px;
        }
        .ks-resizable-handler-b{
            position:absolute;;
            bottom:0;
            left:0;
            opacity:0.5;
            background:#eee;
            height:5px;
            width:100%;
            z-index:1000000;
            cursor: n-resize;
        }

    </style>
</head>
<body>
<!-- 测试用例生成器
 分为下面几种类型：
 1. 效互事件类型
 2. 静态布局类型
 3. 页面大小
 4. 位置
 5. 样式
 6.可选择自动生成常规测试用例
 9.遍历事件自动生成交运
  。。。。
-->
<div id="page">
    <div id="nav">
       UITest
    </div>
    <div id="content">
        <div class="sub">
            <ul>
                <li>
                    <button class="type" data-value='event' href="#" title="交互事件用例">事件</button>
                </li>

                <li>
                    <button class="type" data-value='attr' href="#" title="样式">属性</button>
                </li>
                <li>
                    <button class="type" data-value='style' href="#" title="样式">样式</button>
                </li>
                <li>
                    <button class="type" data-value='align' href="#" title="样式">对齐</button>
                </li>
                <li>
                    <button class="type" data-value='html' href="#" title="样式">内容</button>
                </li>
                <li>
                    <button class="type" data-value='subtree' href="#" title="样式">结构</button>
                </li>
                <li>
                    <button class="type" data-value='position' href="#" title="定位用例">定位</button>
                </li>


            </ul>

        </div>
        <div class="main">
            <div class="page">
                <div id="test-page">
                    <iframe id="iframe-target" src="./testiframe.html" width="100%" height="500px"></iframe>
                </div>


            </div>
            <div class="code" style="position:relative;">
                <div id="test-case">

                </div>
            </div>
        </div>
        <div class="aside">
            <ul class="configs">
                <li><h3 class="event"><a class="title">事件</a><a class="status start">记录</a></h3>
                    <ul>
                        <li><label><input type="checkbox"/>click</label><a href=""></a></li>
                        <li><label><input type="checkbox"/>dbclick</label><a href=""></a></li>
                    </ul>
                </li>
                <li><h3 class="postion"><a class="title">定位</a><a class="status">记录</a></h3>
                    <ul>

                    </ul>
                </li>
                <li><h3 class="align"><a class="title">对齐</a><a class="status">记录</a></h3>
                    <ul>

                    </ul>
                </li>


                <li><h3 class="innerHTML"><a class="title">内容</a><a class="status">记录</a></h3>
                    <ul>

                    </ul>
                </li>
                <li><h3 class="subtree"><a class="title">结构</a><a class="status">记录</a></h3>
                    <ul>

                    </ul>
                </li>
                <li><h3 class="css"><a class="title">样式</a><a class="status">记录</a></h3>
                    <ul>

                    </ul>
                </li>
                <li><h3 class="attr"><a class="title">属性</a><a class="status">记录</a></h3>
                    <ul>

                    </ul>
                </li>

                <!--<li><a class="title" href="#">选择</a>
                    <ul>
                        <li><label><input type="checkbox"/>只当前元素</label><a href=""></a></li>
                        <li><label><input type="checkbox"/>包含子元素</label><a href=""></a></li>
                    </ul>
                </li>
                -->
                <li></li>

            </ul>

        </div>


    </div>
</div>


<!-- 编辑器--->

<script type="text/javascript" src="./editol/editol.js"></script>
<link rel="stylesheet" type="text/css" href="./editol/editol.css">
<script type="text/javascript">

    var editor = document.getElementById("test-case");
    var source = "";
    var textModel = new WebInspector.TextEditorModel();


    var textEditor = new WebInspector.TextViewer(textModel);
    editor.appendChild(textEditor.element)
    textEditor.readOnly = false;
    textEditor.mimeType = "text/javascript";
    textModel.setText(null, source);
    console.log(textModel)


</script>
<script>
    var S = KISSY, D = KISSY.DOM;
    var oldCaseType , caseType;
    E = KISSY.Event;
    var showMsg = function (msg) {
        var p = D.create("<p></p>");
        for (var i = 0; i < arguments.length; i++) {
            var s = D.create("<span>" + arguments[i] + "</span>");
            p.appendChild(s);
        }
        textModel.appendText(msg)
        var lines = D.query(".webkit-line-content");
        var lastLines = lines[lines.length - 1];

        lastLines.scrollIntoView()
    }

    E.on(".status", "click", function (e) {
        var target = e.target;

        if (D.hasClass(target, "start")) {

            var data = {
                set:{
                    caseType:"null"
                }
            }
            console.log(data)
            postmsg.send({
                target:D.get("#iframe-target").contentWindow,
                data  :data
            })
            D.removeClass(target, "start");
            return;
        }
        else {
            var all = D.query(".status");
            for (var i = 0; i < all.length; i++) {
                D.removeClass(all[i], "start");
            }

            D.addClass(target, 'start');
            caseTest = D.attr(target.parentNode, "class");
            console.log(caseTest)
            postmsg.send({
                target:D.get("#iframe-target").contentWindow,
                data  :{set:{
                    caseType:caseTest
                }}
            })

        }


    })


    postmsg.bind(function (data) {
        showMsg(data.caseCode);
    })

</script>
<style>



</style>
<script>
    KISSY.use("node, button, resizable", function (S, Node, Button, Resizable) {
        var r = new Resizable({
            node    :".page",
            // 指定可拖动的位置
            handlers:["b"]


        });


    });

</script>

</body>
</html>
