<!DOCTYPE html>
<html>
<head>
    <meta charset="gbk">
    <title></title>
    <link rel="stylesheet" type="text/css" href="../lib/jasmine.css">
    <script src="../lib/kissy-aio.js"></script>
    <script src="../lib/jasmine.js"></script>
    <script src="../lib/jasmine-html.js"></script>
    <script src="../lib/event-simulate.js"></script>
    <script src="../lib/matcher.js"></script>

</head>
<body>
<style>
    .red{
        color:red;
    }

    .blue{
        color:blue;
    }
    .hide{
        display:none;
    }

</style>
<a id="target" class="default">test</a>

<div class="hide">abce</div>


<input class="check" type="checkbox" checked/>

<div class="list"><ul><li>1</li><li>2</li><li>3</li></ul>
</div>

<input type="text" class="textInput"/>
<script>
    //π¶ƒ‹
    (function () {
        var $ = KISSY.all;
        var el = $("#target");
        var textEl = $('.textInput');
        el.on("click", function () {
            setTimeout(function () {
                el.addClass("red");
                el.removeClass('red');
                el.addClass("blue");
                textEl[0].focus();
            }, 100);
        })


    })();
</script>
<!-- test-->
<script>
    describe("≤‚ ‘new expect API", function () {
        var DOM = KISSY.DOM;
        var el = DOM.get("#target");
        var hiddenEl = DOM.get('.hide');
        var checkBox = DOM.get('.check');
        var listEl = DOM.get('.list');
        var textInput = DOM.get('.textInput');
        it("toHaveClass", function () {
            expect(el).toHaveClass("default");
        });
        it("toBeHidden", function () {

            expect(hiddenEl).toBeHidden();

        });
        it("toBeChecked", function () {

            expect(checkBox).toBeChecked();

        });
        it("toHaveHtml", function () {

            expect(listEl).toHaveHtml('<ul><li>1</li><li>2</li><li>3</li></ul>');
        });

        //“Ï≤Ω≈–∂œ
        it("waitsMatchers", function () {
            simulate(el, 'click');
            waitsMatchers(function () {
                expect(el).toHaveClass("blue");

            }, 200);
            waitsMatchers(function () {
                expect(el).toBeVisible();
            }, 200);
            waitsMatchers(function () {
                expect(textInput).toBeFocused();
            }, 200);


        })


    });

</script>

<script>

    (function () {
        var jasmineEnv = jasmine.getEnv();
        jasmineEnv.updateInterval = 1000;

        var htmlReporter = new jasmine.HtmlReporter();

        jasmineEnv.addReporter(htmlReporter);

        jasmineEnv.specFilter = function (spec) {
            return htmlReporter.specFilter(spec);
        };

        var currentWindowOnload = window.onload;

        window.onload = function () {
            if (currentWindowOnload) {
                currentWindowOnload();
            }
            execJasmine();
        };

        function execJasmine() {
            jasmineEnv.execute();
        }

    })();


    //≤‚ ‘

</script>
</body>
</html>